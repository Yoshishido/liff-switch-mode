<!DOCTYPE html>
<html>
<head>
  <title>Switch Mode</title>
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
</head>
<body>
<script>
  async function run() {
    await liff.init({ liffId: "2007634013-k2ZQv38e" }); // üëà ‡∏Å‡∏£‡∏≠‡∏Å LIFF ID

    if (!liff.isLoggedIn()) {
      liff.login();
      return;
    }

    const profile = await liff.getProfile();
    const userId = profile.userId;

    const urlParams = new URLSearchParams(window.location.search);
    const mode = urlParams.get("mode") || "chat";

    // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô URL ‡∏ï‡∏≤‡∏° server webhook ‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏ä‡πâ
    const targetUrl = `https://primary-production-2a6d.up.railway.app/webhook/Wheelie_AI?mode=${mode}&userId=${userId}`;

    window.location.href = targetUrl;
  }

  run();
</script>
</body>
</html>
